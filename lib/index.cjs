"use strict";const{requestAnimationFrame:m}=window,n=()=>new Date().getTime(),l="There is nothing to undo.",i=n(),r={enable:!1,timestamp:i,stopTime:i,lastTime:i,fps:0},t={...r},s={do:()=>{},list:[]},p=e=>{s.list.push(s.do),s.do=function(o){return function(){return e(arguments[0]),o.apply(this,arguments)}}(s.do)},a=()=>{if(!t.enable)return;const e=n(),o=t.fps?1e3/t.fps:0;if(e-t.lastTime<o){m(()=>a());return}t.lastTime=e;const c=e-t.timestamp;s.do({delta:c}),m(()=>a())},u=()=>{if(t.enable)return;t.enable=!0;const e=n()-t.stopTime;t.timestamp+=e,a()},d=()=>{t.enable=!1,t.stopTime=n()},f=()=>{t.enable=r.enable,s.do=()=>{},s.list=[]},T=()=>{const{list:e}=s;if(e.length===0){console.warn(l);return}s.do=e[e.length-1],e.pop()},g=(e=30)=>{t.fps=e},b=()=>{t.timestamp=n(),t.stopTime=n(),t.lastTime=n()},h={add:p,todo:s,play:u,stop:d,destroy:f,undo:T,setFPS:g,reset:b};module.exports=h;
